{
  "hash": "6881968eb4e15e76c5e45b16fbbb3946",
  "result": {
    "markdown": "---\n# title-block-banner: img/pexels-lukas-590045.jpg\ntitle: \"Introduction à RMarkdown\"\nsubtitle: \"Utiliser RMarkdown pour rédiger des rapports\"\nauthor:\n  - John Godlee\n  - Jonathan Kitt (adaptation)\ndate: \"2022-10-24\"\ncategories: [R, RStudio, Tidyverse]\nformat: \n  html: \n    toc: true\n    toc-depth: 2\n    toc-title: \"Sommaire\"\n---\n\n\n*Ce tutoriel est adapté de [Getting started with R Markdown](https://ourcodingclub.github.io/tutorials/rmarkdown/) du site [Our Coding Club](https://ourcodingclub.github.io/).*\n\n<br>\n\n# Introduction\n\n## Qu'est-ce que R Markdown ?\n\nR Markdown vous permet de créer des documents, notamment des rapports de vos analyses. Les personnes qui liront votre code doivent pouvoir facilement comprendre et reproduire votre analyse : c'est la reproductibilité.\n\nVous pouvez créer un document R Markdown et le partager, ou vous en servir à titre personnel pour garder une trace des étapes et des résultats d'une analyse.\n\nR Markdown permet d'afficher le code utilisé et les résultats obtenus (graphiques, tables, ...) ainsi que des commentaires explicatifs, un peu à la manière d'un cahier de laboratoire.\n\nR Markdown utilise la syntaxe Markdown, un langage *markup* qui propose des outils pour créer des documents avec des en-têtes, des images, des liens, ... \n\nUn document Markdown peut être converti en différents formats comme du *html* ou du *pdf*.\n\nLorsque vous créez un fichier R Markdown (`.Rmd`), vous utiliserez la syntaxe Markdown aux côtés de blocs de code écrits en R (ou d'autres langages de programmation). Ce fichier est ensuite compilé : le format Markdown et le code sont évalués, et un fichier de sortie (`html`, `pdf`, ...) est généré.\n\n\n\n\n\n## Organiser son travail\n\nSi vous n'avez pas suivi les autres tutoriels, suivez les instructions suivantes :\n\n-   [Créez un nouveau projet](https://ateliers-codons.netlify.app/posts/02-premiers-pas-avec-r/#créer-un-projet)\n\n-   [Créez une arborescence](https://ateliers-codons.netlify.app/posts/02-premiers-pas-avec-r/#créer-une-arborescence)\n\n## Installer et charger RMarkdown\n\nPour utiliser RMarkdown dans RStudio, installez et chargez le package `rmarkdown` :\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"rmarkdown\")\nlibrary(rmarkdown)\n```\n:::\n\n\n# Créer un document R Markdown\n\n## Ouvrir un nouveau fichier R Markdown\n\nPour créer un nouveau document R Markdown (.RMd), cliquez sur \\*File \\> New File \\> R Markdown ...\". Vous pouvez également cliquer sur le symbole\\* Plus\\* et choisir \\*R Markdown...\"\n\n\\[![](img/rmd_01.png){width=\"100%\"}\\]\n\nDans la fenêtre qui s'ouvre, laissez les paramètres par défaut et cliquez sur **Create Empty Document** (en cliquant sur **OK** vous créerez un document pré-rempli).\n\n\\[![](img/rmd_02.png){width=\"100%\"}\\]\n\nVotre document vide s'ouvre dans la fenêtre en haut à gauche de RStudio.\n\n\\[![](img/rmd_03.png){width=\"100%\"}\\]\n\n## Ajouter un en-tête\n\nUn document Rmd débute toujours par une section d'en-tête encadrée par trois tirets. Par défaut, cet en-tête contient le titre, l'auteur, la date et le format de fichier en sortie. Il existe beaucoup d'autres paramètres pour modifier et personnaliser votre document.\n\nVoici un exemple d'en-tête à insérer en haut de votre ficher .Rmd :\n\n\n::: {.cell}\n\n```{.r .cell-code}\n---\ntitle: \"Pingouins de l'archipel Palmer\"\nauthor: Jonathan Kitt\ndate: 2022-11-14\noutput: html_document\n---\n```\n:::\n\n\n::: {.callout-note icon=\"true\"}\n## Le YAML\n\nCet en-tête s'appelle un **YAML : Yet Another Markup Language**\n:::\n\nSauvegardez votre fichier Rmd en cliquant sur l'icône disquette (ou en utilisant la combinaison Ctrl + S). Choisissez un nom pour votre fichier et placez-le dans votre dossier **docs**.\n\n\\[![](img/rmd_04.png){width=\"100%\"}\\]\n\n\\[![](img/rmd_05.png){width=\"100%\"}\\]\n\n## Compiler un document R Markdown\n\nPour compiler votre fichier Rmd et générer le document au format choisi (html dans notre cas), cliquez sur le bouton **Knit**\n\nLe document s'ouvre dans une nouvelle fenêtre.\n\n\\[![](img/rmd_06.png){width=\"100%\"}\\]\n\n::: {.callout-tip icon=\"true\"}\n## Raccourci clavier : compiler un fichier Rmd\n\nPour compiler un fichier Rmd, utilisez la combinaison **Ctrl + Shift + K**\n:::\n\nDans l'explorateur de fichiers vous pouvez remarquer qu'un fichier **mesures_pingouins.html** a été ajouté dans le répertoire **docs** : il s'agit du fichier hmtl issu de la compilation du fichier Rmd. En cliquant sur le nom de ce fichier vous aurez le choix entre l'ouvrir dans l'éditeur ou dans un navigateur internet.\n\n\\[![](img/rmd_07.png){width=\"100%\"}\\]\n\n::: {.callout-tip icon=\"true\"}\n## Prévisualiser le document\n\nPar défaut, lorsque vous compilez un fichier Rmd, le document généré s'ouvre dans une nouvelle fenêtre. Vous pouvez choisir d'afficher cette pré-visualisation directement dans l'onglet **Viewer** en bas à droite de RStudio en cliquant sur la roue à droite du bouton Knit puis sur **Preview in Viewer Pane**.\n\n\\[![](img/rmd_08.png){width=\"100%\"}\\]\n\n\\[![](img/rmd_08.png){width=\"100%\"}\\]\n:::\n\n# Mise en forme\n\nPour mettre en forme votre texte, vous allez utiliser la syntaxe markdown.\n\n::: {.callout-note icon=\"true\"}\n## Editeur visuel\n\nVous pouvez modifier votre fichier Rmd à la manière d'un éditeur de texte à l'aide de l'éditeur visuel : cliquez sur le bouton **Visual** en haut du fichier.\n\n\\[![](img/rmd_10.png){width=\"100%\"}\\]\n:::\n\n## Insérer des titres\n\nPour insérer un titre, utilisez un `#`. Vous pouvez utiliser différents niveaux en ajoutant des `#` :\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Niveau 1\n## Niveau 2\n### Niveau 3\n```\n:::\n\n\n\\[![](img/rmd_11.png){width=\"100%\"}\\]\n\n## Mettre en forme le texte\n\nPour mettre en forme votre texte, utilisez les conventions suivantes :\n\n\n::: {.cell}\n\n```{.r .cell-code}\n*Texte en italiques*  \n**Texte en gras**\n***Texte en italiques et en gras***\n~~Texte barré~~\n```\n:::\n\n\n\\[![](img/rmd_12.png){width=\"100%\"}\\]\n\n## Insérer des listes\n\nVous pouvez insérer une liste à puces :\n\n\n::: {.cell}\n\n```{.r .cell-code}\n* item 1  \n* item 2    \n* item 3\n  + item 3a  \n  + item 3b  \n```\n:::\n\n\n\\[![](img/rmd_13.png){width=\"100%\"}\\]\n\nOu une liste numérotée :\n\n\n::: {.cell}\n\n```{.r .cell-code}\n1. item 1  \n2. item 2    \n3. item 3 \n```\n:::\n\n\n\\[![](img/rmd_14.png){width=\"100%\"}\\]\n\n## Insérer un tableau\n\nVous pouvez insérer un tableau en le \"dessinant\" : - des tirets `-` pour déparer l'en-tête du reste du tableau\\\n- des barres verticales `|` pour délimiter les colonnes\n\n![](img/rmd_22.png){width=\"100%\"}\n\n| col 1 | col 2 | col 3 |\n|-------|-------|-------|\n| A     | 1     | ech1  |\n| B     | 2     | ech2  |\n| C     | 3     | ech3  |\n\nPour aligner le texte, utilisez deux points `:` :\n\n![](img/rmd_22.png){width=\"100%\"}\n\n| gauche | droite | centre |\n|:-------|-------:|:------:|\n| A      |      1 |  ech1  |\n| B      |      2 |  ech2  |\n| C      |      3 |  ech3  |\n\n## Insérer une citation\n\nVous pouvez insérer une citation :\n\n\n::: {.cell}\n\n```{.r .cell-code}\nComme l'a dit ...  \n\n> Ceci est une citation\n```\n:::\n\n\n\\[![](img/rmd_16.png){width=\"100%\"}\\]\n\n## Notation mathématique\n\nVous pouvez insérer du texte en exposant ou en indice :\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntexte en ^exposant^ ou texte en ~indice~.\n```\n:::\n\n\n\\[![](img/rmd_14.png){width=\"100%\"}\\]\n\n## Equation mathématique\n\nLa syntaxe pour insérer une équation mathématique se base sur la syntaxe LaTeX :\n\n\nLa formule pour calculer l'aire $A$ d'un cercle de rayon $r$ est : \n\n$$A = \\pi \\times r^{2}$$\n\n::: {.cell}\n\n:::\n\n\n\\[![](img/rmd_17.png){width=\"100%\"}\\]\n\n## Insérer une image\n\nVous pouvez insérer une image dans votre fichier :\n\n::: {.callout-important icon=\"true\"}\n## Chemins vers les fichiers\n\nLorsque que vous indiquez un chemin vers un fichier dans RMarkdown, le dossier \"racine\" n'est plus votre répertoire de travail (votre projet) mais le dossier dans lequel se trouve le fichier .Rmd, dans le cas présent le répertoire docs/ situé lui-même dans le répertoire de travail. Il faut donc revenir en arrière d'un niveau, ce qui s'effectue à l'aide de l'opérateur **`../`**. Lorsque vous naviguez dans une arborescence à l'aide de la ligne de commande, **`.`** indique le répertoire de travail et **`..`** le répertoire situé un niveau au-dessus dans votre arborescence.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n![](../raw/lter_penguins.png){width=\"100%\"}\n```\n:::\n\n\n![](img/rmd_18.png){width=\"100%\"}\n\n# Rédiger un document de façon dynamique\n\nLorsque vous rédigez un rapport, vous pouvez le faire \"en dur\", c'est-à-dire inscrire directement dans le texte toutes les valeurs numériques, les résultats de calculs, insérer des graphiques générés séparément, ... Cette façon de procéder présente un désavantage majeur : votre document ne sera valable qu'une seule fois pour une seule analyse (vous pourrez toujours le ré-utiliser en remplaçant les valeurs numériques, ...). De plus, le risque d'erreur est non négligeable : coller des valeurs numériques copiées depuis un autre logiciel peut créer des mauvaises surprises, des noms complexes seront facilement mal écrits, ...\n\nPour pallier à ces différents problèmes, RMarkdown vous permet de rédiger votre fichier de façon \"dynamique\" : vous pouvez ainsi importer les fichiers nécessaires à votre analyse et insérer des calculs, des graphiques à l'aide de code R qui sera compilé afin de générer le document de sortie. Dès lors, votre fichier Rmd pourra facilement être rectifié ou utilisé pour des analyses similaires sur d'autres jeux de données.\n\n## Insérer un bloc de code R\n\nCommençons par importer notre jeu de données à l'aide d'une ligne de code insérée dans un bloc de code. Dans RMarkdown, un bloc de code est encadré par trois **\\`\\`\\`**. Sur la première ligne on indique entre accolades qu'il s'agit de code R :\n\n![](img/rmd_19.png){width=\"100%\"}\n\n::: {.callout-tip icon=\"true\"}\n## Raccourci clavier : insérer un bloc de code\n\nPour insérer un bloc de code, utiliser la combinaison **Ctrl + Alt + I**\n:::\n\nAjoutons la ligne de code permettant d'importer le jeu de données (attention au chemin !)\n\n![](img/rmd_19.png){width=\"100%\"}\n\nVous pouvez exécuter ce code comme vous le feriez dans un script classique en cliquant sur la flèche verte à droite du code (ou en vous plaçant sur la ligne et en utilisant la combinaison **Ctrl + Entrée**). Le fichier a bien été importé et stocké dans l'objet **pingouins** visible dans l'environnement.\n\n![](img/rmd_20.png){width=\"100%\"}\n\nLorsque vous compilez votre fichier Rmd, le code est exécuté et s'affiche dans le document :\n\n![](img/rmd_21.png){width=\"100%\"}\n\n::: {.callout-tip icon=\"true\"}\n## Bloc de code : les options\n\nLorsque vous insérez un bloc de code, des paramètres vous permettent de préciser si le code doit être affiché ou non, exécuté ou non, ... Ces options sont à placer dans les accolades : `{r param=TRUE} par exemple`.\n\n|         |                                       |\n|---------|---------------------------------------|\n| echo    | afficher le code dans le document     |\n| eval    | exécuter le code                      |\n| error   | afficher les messages d'erreur        |\n| warning | afficher les messages d'avertissement |\n:::\n\n## Insérer du code dans le texte\n\nVous pouvez insérer du texte au format code en l'encadrant par des **\\`\\`** :\n\nInsérer du code \\`ici\\`. Insérer du code `ici`.\n\nVous pouvez également exécuter le code dans le texte en ajoutant un `r` :\n\n![](img/rmd_24.png){width=\"100%\"}\n\nLe résultat de l'opération `2 + 2` est 4\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}